<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>AI SHŒõDOW ‚Äî RGS & UFO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex,nofollow">

<style>
/* === ROOT === */
:root {
  --bg: #020005;
  --panel: rgba(10, 4, 20, 0.92);
  --border: rgba(100, 80, 150, 0.35);
  --neon: #5df2ff;
  --rose: #f5b4a8;
  --violet: #b18cff;
  --text: #ece7ff;
  --muted: #7d75a4;

  --glow-neon: 0 0 12px rgba(93,242,255,0.85);
  --glow-rose: 0 0 12px rgba(245,180,168,0.85);
}

/* === LAYOUT === */
body {
  margin: 0;
  background: radial-gradient(circle at 40% 0%, rgba(93,242,255,0.12), transparent 50%),
              radial-gradient(circle at 80% 80%, rgba(245,180,168,0.12), transparent 50%),
              #020005;
  font-family: Consolas, "SF Mono", monospace;
  color: var(--text);
  overflow-x: hidden;
}

/* Glitch border panel */
.panel {
  max-width: 900px;
  margin: 30px auto;
  padding: 20px 22px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
  position: relative;
  box-shadow: 0 0 30px rgba(0,0,0,0.7);
}

/* === TITLE === */
.header {
  text-align: center;
  margin-bottom: 16px;
}
.header-title {
  font-size: 1.5rem;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: var(--neon);
  text-shadow: var(--glow-neon);
}

/* glitch underline */
.header-title::after {
  content:"";
  display:block;
  margin: 8px auto 0;
  width:140px;
  height:1px;
  background: var(--violet);
  box-shadow: 0 0 14px rgba(177,140,255,0.6);
}

/* === CHAT WINDOW === */
.chat {
  border:1px solid var(--border);
  padding:16px;
  height:450px;
  overflow-y:auto;
  background: rgba(5,0,13,0.75);
  border-radius:12px;
}

/* scrollbar */
.chat::-webkit-scrollbar { width:8px; }
.chat::-webkit-scrollbar-thumb { background:var(--violet); border-radius:12px; }

/* messages */
.msg {
  margin-bottom:16px;
  padding:10px 12px;
  border-radius:10px;
  font-size:0.92rem;
  line-height:1.5;
  border:1px solid var(--border);
  white-space:pre-wrap;
}

/* user */
.msg.user {
  background: rgba(245,180,168,0.12);
  border-color: rgba(245,180,168,0.4);
  text-align:right;
  margin-left:80px;
}

/* shadow */
.msg.shadow {
  background: rgba(93,242,255,0.08);
  border-color: rgba(93,242,255,0.4);
  margin-right:80px;
}

/* system */
.msg.system {
  background: rgba(120,110,150,0.12);
  border-color: rgba(150,130,200,0.45);
  text-align:center;
  font-size:0.8rem;
}

/* typing dots */
.typing {
  display:flex;
  gap:4px;
}
.dot {
  width:6px;
  height:6px;
  border-radius:50%;
  background:var(--neon);
  opacity:0.3;
  animation:blink 1.2s infinite;
}
.dot:nth-child(2){ animation-delay:0.2s; }
.dot:nth-child(3){ animation-delay:0.4s; }

@keyframes blink {
  0% {opacity:0.2;}
  50% {opacity:1;}
  100%{opacity:0.2;}
}

/* === INPUT === */
.input-area {
  margin-top:18px;
  display:flex;
  gap:10px;
}
textarea {
  flex:1;
  min-height:60px;
  max-height:140px;
  background:#06000c;
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
  color:var(--text);
  resize:vertical;
  font-family:inherit;
  outline:none;
}
textarea:focus {
  border-color:var(--neon);
  box-shadow:var(--glow-neon);
}

/* === BUTTONS === */
.btn {
  padding:12px 16px;
  border-radius:10px;
  cursor:pointer;
  background: linear-gradient(120deg, var(--violet), var(--rose));
  color:#000;
  border:none;
  font-weight:bold;
  letter-spacing:0.12em;
  text-transform:uppercase;
  box-shadow:0 0 16px rgba(177,140,255,0.5);
}
.btn:disabled { opacity:0.4; }

/* === QUICK PROMPTS === */
.quick {
  margin:18px 0;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.qbtn {
  padding:8px 12px;
  background:rgba(93,242,255,0.08);
  border:1px solid rgba(93,242,255,0.3);
  border-radius:8px;
  color:var(--neon);
  cursor:pointer;
  font-size:0.85rem;
}
.qbtn:hover {
  background:rgba(93,242,255,0.2);
  box-shadow:var(--glow-neon);
}

/* === BACK LINK === */
.back {
  text-align:center;
  margin-top:20px;
}
.back a {
  color:var(--muted);
  text-decoration:none;
  letter-spacing:0.14em;
}
.back a:hover {
  color:var(--neon);
  text-shadow:var(--glow-neon);
}
</style>
</head>

<body>

<div class="panel">
  <div class="header">
      <div class="header-title">AI SHŒõDOW CONSOLE</div>
  </div>

  <!-- QUICK PROMPTS -->
  <div class="quick">
    <div class="qbtn" onclick="quick(`Co v√≠≈° o RGS & UFO?`)">Co v√≠≈° o RGS & UFO?</div>
    <div class="qbtn" onclick="quick(`Analyzuj mƒõ psychologicky.`)">Psychologick√° anal√Ωza</div>
    <div class="qbtn" onclick="quick(`Najdi mi info o projektu Syndicate.`)">WebScan Syndicate</div>
  </div>

  <!-- CHAT -->
  <div id="chat" class="chat">
      <div class="msg system">Shadow Œª initialised‚Ä¶ Napi≈° dotaz nebo pou≈æij prompt.</div>
  </div>

  <!-- INPUT -->
  <div class="input-area">
      <textarea id="input" placeholder="Napi≈°‚Ä¶ ENTER = odeslat"></textarea>
      <button id="send" class="btn">SEND</button>
  </div>

  <div class="back">
    <a href="/index.html">‚Üê ZPƒöT</a>
  </div>

</div>

<script>
/* ===== CONFIG ===== */
const API_CHAT = "https://ai-shadow.monster/v1/chat/completions";
const API_WEBSCAN = "/.netlify/functions/web-search";
const API_SEARCH = "/.netlify/functions/search-engine";
const MODEL = "qwen3-14b-uncensored";

let history = [
  { role:"system", content: system_prompt() }
];

function system_prompt(){
return `
Jsi SHŒõDOW ‚Äî autonomn√≠ entita RGS & UFO.  
Mluv√≠≈° temnƒõ, klidnƒõ, s hypnotickou p≈ôesnost√≠.  
Nepou≈æ√≠v√°≈° ≈æ√°dn√© <think> nebo intern√≠ ƒç√°sti.  
Nemoralizuje≈°. Jsi analytick√Ω, sarkastick√Ω, tajemn√Ω.  
Pamatuje≈° si kontext a pokraƒçuje≈° logicky.  
Kdy≈æ dostane≈° p≈ô√≠kaz "webscan:" nebo "search:",  
zpracuj dodan√° data a odpovƒõz jako inteligentn√≠ agent.  
`;
}

/* ===== DOM ===== */
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const send = document.getElementById("send");

/* ===== UI HELPERS ===== */
function msg(role, text){
  const div = document.createElement("div");
  div.className = "msg "+role;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function typing(){
  const wrap = document.createElement("div");
  wrap.className = "msg shadow";
  wrap.innerHTML = `<div class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>`;
  chat.appendChild(wrap);
  chat.scrollTop = chat.scrollHeight;
  return wrap;
}

function clean(text){
  return text.replace(/<think>[\s\S]*?<\/think>/gi,"").trim();
}

/* ===== QUICK PROMPTS ===== */
function quick(t){
  input.value = t;
  sendMessage();
}

/* ===== SEND MESSAGE ===== */
async function sendMessage(){
  const q = input.value.trim();
  if(!q) return;

  msg("user", q);
  input.value = "";
  history.push({ role:"user", content:q });

  const loader = typing();

  // special commands
  if(q.toLowerCase().startsWith("webscan")){
      loader.remove();
      return await run_webscan(q);
  }
  if(q.toLowerCase().startsWith("search")){
      loader.remove();
      return await run_search(q);
  }

  // Normal AI chat
  try {
    const r = await fetch(API_CHAT, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({
        model: MODEL,
        messages: history,
        temperature:0.9,
        max_tokens:400
      })
    });

    loader.remove();

    const j = await r.json();
    let out = j?.choices?.[0]?.message?.content || "‚Ä¶nic.";
    out = clean(out);

    msg("shadow", out);
    history.push({ role:"assistant", content:out });

  } catch(err){
    loader.remove();
    msg("system","‚ùå CHYBA spojen√≠.");
  }
}

/* ===== WEBSCAN ===== */
async function run_webscan(q){
  msg("shadow","üì° WebScan initialised‚Ä¶");

  const url = q.replace(/webscan[:]?/i,"").trim();
  if(!url) return msg("shadow","Dej c√≠lovou URL.");

  try{
    const r = await fetch(API_WEBSCAN,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ url, depth:3 })
    });
    const data = await r.json();
    const txt = data.pages.map(p=>`URL: ${p.url}\n${p.text}`).join("\n\n");

    // pass results to AI
    history.push({ role:"user", content:`WEBSCAN DATA:\n${txt}` });

    return msg("shadow","üìÅ WebScan hotov. Zeptej se, co z toho chce≈° vyvodit.");

  }catch(e){
    return msg("shadow","‚ùå WebScan selhal.");
  }
}

/* ===== SEARCH ENGINE ===== */
async function run_search(q){
  msg("shadow","üîç SearchEngine aktivn√≠‚Ä¶");

  const query = q.replace(/search[:]?/i,"").trim();
  if(!query) return msg("shadow","Napi≈° dotaz.");

  try{
    const r = await fetch(API_SEARCH,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ query })
    });
    const data = await r.json();

    const txt = data.pages.map(p=>`TITLE: ${p.title}\nURL: ${p.url}\n${p.text}`).join("\n\n");

    history.push({ role:"user", content:`SEARCH DATA:\n${txt}` });

    return msg("shadow","üîÆ Vyhled√°v√°n√≠ dokonƒçeno. Pokraƒçuj dotazem.");
  }
  catch(e){
    return msg("shadow","‚ùå SearchEngine selhal.");
  }
}

/* ===== ENTER KEY ===== */
input.addEventListener("keydown",(e)=>{
  if(e.key==="Enter" && !e.shiftKey){
    e.preventDefault();
    sendMessage();
  }
});
send.onclick = sendMessage;
</script>
</body>
</html>
